<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Delivery • Focinhos Amados</title>
  <meta name="description" content="Peça ração e petiscos no Delivery. Confirmamos tudo pelo WhatsApp." />
  <meta name="theme-color" content="#029935" />
  <link rel="manifest" href="manifest.webmanifest" />
  <link rel="icon" href="assets/img/logo.svg" type="image/svg+xml" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="site-header">
    <div class="row row--between row--center" style="padding:12px 16px">
      <a href="/" aria-label="Página inicial"><img src="assets/img/logo.svg" alt="Focinhos Amados" style="height:40px" /></a>
      <nav class="row row--wrap" aria-label="Navegação principal">
        <a class="btn btn--link" href="agendar.html">Agendar</a>
        <a class="btn btn--link" href="taxi.html">Taxi Dog</a>
        <a class="btn btn--link" href="delivery.html" aria-current="page">Delivery</a>
        <button class="btn" type="button" data-action="open-resumo">
          <svg class="icon" aria-hidden="true"><use href="#i-eye"/></svg>
          <span>Ver Resumo</span>
        </button>
      </nav>
    </div>
  </header>

  <main style="display:grid;gap:16px;padding:16px">

    <section class="card card--shadow gap">
      <header class="row row--between row--center">
        <h1 class="h3">Delivery de Ração</h1>
        <p class="save-indicator">Rascunho salvo</p>
      </header>
      <p class="muted">Inclua o que precisa e confirme pelo <strong>Resumo</strong>. Sem preços no site — combinamos valores no WhatsApp.</p>
    </section>

    <!-- Itens desejados -->
    <section class="card gap">
      <h2 class="h4">Itens para entrega</h2>
      <p class="muted">Dica: descreva marca e tamanho. Ex.: “Premier Raças Médias 10kg, Petisco dental”.</p>
      <label class="sr-only" for="delivery-itens">Itens</label>
      <textarea id="delivery-itens" rows="4" placeholder="Liste aqui o que deseja receber" data-bind="delivery.texto"></textarea>
      <div class="hint hint--inline">
        <p class="muted">Sugestões comuns:</p>
        <div class="chip-list" id="delivery-sugestoes" role="list">
          <button class="chip" type="button" data-item="Premier Raças Médias 10kg"><span class="chip__title">Premier 10kg</span><span class="chip__sub muted">Raças médias</span></button>
          <button class="chip" type="button" data-item="Golden Seleção Natural 10kg"><span class="chip__title">Golden 10kg</span><span class="chip__sub muted">Seleção Natural</span></button>
          <button class="chip" type="button" data-item="Special Dog Prime 12kg"><span class="chip__title">Special Dog 12kg</span><span class="chip__sub muted">Prime</span></button>
          <button class="chip" type="button" data-item="GranPlus Menu 10kg"><span class="chip__title">GranPlus 10kg</span><span class="chip__sub muted">Menu</span></button>
          <button class="chip" type="button" data-item="Petisco dental"><span class="chip__title">Petisco dental</span></button>
          <button class="chip" type="button" data-item="Tapete higiênico"><span class="chip__title">Tapete higiênico</span></button>
        </div>
      </div>
    </section>

    <!-- Endereço (reuso da logística) -->
    <section class="card gap">
      <h2 class="h4">Endereço para entrega</h2>
      <p class="muted">Usaremos o mesmo padrão do agendamento. Se preferir outro endereço, ajuste abaixo.</p>
      <div class="grid grid--2">
        <div class="field"><label for="end-rua">Rua</label><input id="end-rua" type="text" autocomplete="address-line1" data-bind="logistica.endereco.rua"></div>
        <div class="field"><label for="end-num">Número</label><input id="end-num" type="text" autocomplete="address-line2" data-bind="logistica.endereco.numero"></div>
        <div class="field"><label for="end-bairro">Bairro</label><input id="end-bairro" type="text" data-bind="logistica.endereco.bairro"></div>
        <div class="field"><label for="end-cidade">Cidade</label><input id="end-cidade" type="text" data-bind="logistica.endereco.cidade"></div>
      </div>
      <div class="field"><label for="end-ref">Referência</label><input id="end-ref" type="text" placeholder="Ponto de referência" data-bind="logistica.endereco.ref"></div>
    </section>

    <!-- Contato -->
    <section class="card gap">
      <h2 class="h4">Seus dados de contato</h2>
      <div class="grid grid--2">
        <div class="field"><label for="cli-nome">Seu nome</label><input id="cli-nome" type="text" autocomplete="name" data-bind="cliente.nome"></div>
        <div class="field"><label for="cli-tel">Telefone (WhatsApp)</label><input id="cli-tel" type="tel" inputmode="tel" placeholder="(31) 9xxxx‑xxxx" data-bind="cliente.telefone"><small class="muted">Usaremos para confirmar pelo WhatsApp.</small></div>
      </div>
    </section>

    <!-- Ações -->
    <section class="card actions">
      <button class="btn btn--primary" type="button" data-action="open-resumo">
        <svg class="icon" aria-hidden="true"><use href="#i-eye"/></svg>
        <span>Ver Resumo e Enviar</span>
      </button>
      <button class="btn" type="button" id="btn-copy-page">
        <svg class="icon" aria-hidden="true"><use href="#i-copy"/></svg>
        <span>Copiar dados</span>
      </button>
      <button class="btn btn--ghost" type="button" id="btn-clear-page">
        <svg class="icon" aria-hidden="true"><use href="#i-trash"/></svg>
        <span>Limpar rascunho</span>
      </button>
      <p class="muted">LGPD: usamos seus dados apenas para atendimento via WhatsApp.</p>
    </section>

  </main>

  <!-- Ícones inline (mínimo necessário) -->
  <svg xmlns="http://www.w3.org/2000/svg" style="display:none">
    <symbol id="i-eye" viewBox="0 0 24 24"><path d="M2 12s3.5-6 10-6 10 6 10 6-3.5 6-10 6S2 12 2 12Z" stroke="currentColor" stroke-width="2" fill="none"/><circle cx="12" cy="12" r="3" fill="currentColor"/></symbol>
    <symbol id="i-copy" viewBox="0 0 24 24"><path d="M9 9h9v9H9z" stroke="currentColor" stroke-width="2" fill="none"/><path d="M6 6h9v9" stroke="currentColor" stroke-width="2" fill="none"/></symbol>
    <symbol id="i-trash" viewBox="0 0 24 24"><path d="M4 7h16M8 7V5h8v2m-1 0v12a2 2 0 0 1-2 2H9a2 2 0 0 1-2-2V7h10Z" stroke="currentColor" stroke-width="2" fill="none" stroke-linejoin="round"/></symbol>
  </svg>

  <script defer src="config.js"></script>
  <script defer src="main.js"></script>
  <script>
    // Sugestões rápidas: insere no textarea (linha separada)
    document.addEventListener('DOMContentLoaded', ()=>{
      const box = document.getElementById('delivery-itens');
      const list = document.getElementById('delivery-sugestoes');
      if(list && box){
        list.addEventListener('click', (e)=>{
          const btn = e.target.closest('[data-item]');
          if(!btn) return;
          const item = btn.getAttribute('data-item');
          const cur = (box.value || '').trim();
          const lines = cur ? cur.split(/\n+/) : [];
          if(!lines.includes(item)) lines.push(item);
          box.value = lines.join('\n');
          box.dispatchEvent(new Event('input', { bubbles:true }));
        });
      }

      // utilidades
      const copyBtn = document.getElementById('btn-copy-page');
      const clearBtn = document.getElementById('btn-clear-page');
      if(copyBtn){ copyBtn.addEventListener('click', ()=>{
        try{
          const s = localStorage.getItem((window.CONFIG && window.CONFIG.STORAGE && window.CONFIG.STORAGE.KEY) || 'fa_state_v1');
          navigator.clipboard.writeText(s || '').then(()=>{
            const t = document.createElement('div'); t.className='toast is-visible'; t.textContent='Dados copiados'; document.body.appendChild(t); setTimeout(()=>t.remove(), 1500);
          });
        }catch{}
      });}
      if(clearBtn){ clearBtn.addEventListener('click', ()=>{
        try{
          localStorage.removeItem((window.CONFIG && window.CONFIG.STORAGE && window.CONFIG.STORAGE.KEY) || 'fa_state_v1');
          location.reload();
        }catch{}
      });}
    });

    if('serviceWorker' in navigator){
      window.addEventListener('load', ()=>{ navigator.serviceWorker.register('sw.js').catch(()=>{}); });
    }
  </script>
</body>
</html>
