<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Taxi Dog • Focinhos Amados</title>
  <meta name="description" content="Solicite Taxi Dog: buscamos e/ou levamos seu pet com segurança. Confirme tudo pelo WhatsApp." />
  <meta name="theme-color" content="#029935" />
  <link rel="manifest" href="manifest.webmanifest" />
  <link rel="icon" href="assets/img/logo.svg" type="image/svg+xml" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="site-header">
    <div class="row row--between row--center" style="padding:12px 16px">
      <a href="/" aria-label="Página inicial"><img src="assets/img/logo.svg" alt="Focinhos Amados" style="height:40px" /></a>
      <nav class="row row--wrap" aria-label="Navegação principal">
        <a class="btn btn--link" href="agendar.html">Agendar</a>
        <a class="btn btn--link" href="taxi.html" aria-current="page">Taxi Dog</a>
        <a class="btn btn--link" href="delivery.html">Delivery</a>
        <button class="btn" type="button" data-action="open-resumo">
          <svg class="icon" aria-hidden="true"><use href="#i-eye"/></svg>
          <span>Ver Resumo</span>
        </button>
      </nav>
    </div>
  </header>

  <main style="display:grid;gap:16px;padding:16px">

    <section class="card card--shadow gap">
      <header class="row row--between row--center">
        <h1 class="h3">Taxi Dog</h1>
        <p class="save-indicator">Rascunho salvo</p>
      </header>
      <p class="muted">Escolha a opção desejada e preencha seu endereço. Você pode revisar no <strong>Resumo</strong> antes de enviar pelo WhatsApp.</p>
    </section>

    <!-- Tipo de corrida -->
    <section class="card gap">
      <h2 class="h4">O que você precisa?</h2>
      <fieldset class="grid grid--2" role="group" aria-label="Opções de Taxi Dog">
        <label class="chip"><input type="radio" name="logistica-tipo" value="ida" data-bind="logistica.tipo"> <span>Buscar em casa (ida)</span></label>
        <label class="chip"><input type="radio" name="logistica-tipo" value="volta" data-bind="logistica.tipo"> <span>Levar de volta (volta)</span></label>
        <label class="chip"><input type="radio" name="logistica-tipo" value="ida_e_volta" data-bind="logistica.tipo"> <span>Buscar e levar (ida e volta)</span></label>
        <label class="chip"><input type="radio" name="logistica-tipo" value="loja" data-bind="logistica.tipo"> <span>Vou levar/retirar na loja</span></label>
      </fieldset>
      <p class="muted">Se estiver agendando banho/tosa, essa escolha será integrada ao seu pedido.</p>
    </section>

    <!-- Endereço -->
    <section class="card gap">
      <h2 class="h4">Endereço para o Taxi</h2>
      <div class="grid grid--2">
        <div class="field"><label for="end-rua">Rua</label><input id="end-rua" type="text" autocomplete="address-line1" data-bind="logistica.endereco.rua"></div>
        <div class="field"><label for="end-num">Número</label><input id="end-num" type="text" autocomplete="address-line2" data-bind="logistica.endereco.numero"></div>
        <div class="field"><label for="end-bairro">Bairro</label><input id="end-bairro" type="text" data-bind="logistica.endereco.bairro"></div>
        <div class="field"><label for="end-cidade">Cidade</label><input id="end-cidade" type="text" data-bind="logistica.endereco.cidade"></div>
      </div>
      <div class="field"><label for="end-ref">Referência</label><input id="end-ref" type="text" placeholder="Ponto de referência" data-bind="logistica.endereco.ref"></div>

      <div class="row row--wrap gap">
        <button class="btn" type="button" data-action="geolocate">
          <svg class="icon" aria-hidden="true"><use href="#i-locate"/></svg>
          <span>Usar minha localização</span>
        </button>
        <p class="muted" aria-live="polite"><span>Geo:</span> <span data-bind="logistica.lat">—</span>, <span data-bind="logistica.lng">—</span></p>
      </div>
    </section>

    <!-- Dados do pet (opcional, caso só taxi) -->
    <section class="card gap">
      <h2 class="h4">Pet (opcional)</h2>
      <div class="grid grid--2">
        <div class="field"><label for="pet-nome">Nome do pet</label><input id="pet-nome" type="text" placeholder="Ex.: Thor" data-bind="pet.nome"></div>
        <div class="field">
          <span class="label">Porte</span>
          <div class="chip-list" role="group" aria-label="Porte do pet">
            <label class="chip"><input type="radio" name="pet-porte" value="pequeno" data-bind="pet.porte"> <span>Pequeno</span></label>
            <label class="chip"><input type="radio" name="pet-porte" value="medio" data-bind="pet.porte"> <span>Médio</span></label>
            <label class="chip"><input type="radio" name="pet-porte" value="grande" data-bind="pet.porte"> <span>Grande</span></label>
          </div>
        </div>
      </div>
      <div class="field"><label for="pet-obs">Observações</label><textarea id="pet-obs" rows="3" placeholder="Alergias, comportamento, pedidos especiais" data-bind="pet.observacoes"></textarea></div>
    </section>

    <!-- Contato -->
    <section class="card gap">
      <h2 class="h4">Seus dados de contato</h2>
      <div class="grid grid--2">
        <div class="field"><label for="cli-nome">Seu nome</label><input id="cli-nome" type="text" autocomplete="name" data-bind="cliente.nome"></div>
        <div class="field"><label for="cli-tel">Telefone (WhatsApp)</label><input id="cli-tel" type="tel" inputmode="tel" placeholder="(31) 9xxxx‑xxxx" data-bind="cliente.telefone"><small class="muted">Usaremos para confirmar pelo WhatsApp.</small></div>
      </div>
    </section>

    <!-- Ações -->
    <section class="card actions">
      <button class="btn btn--primary" type="button" data-action="open-resumo">
        <svg class="icon" aria-hidden="true"><use href="#i-eye"/></svg>
        <span>Ver Resumo e Enviar</span>
      </button>
      <button class="btn" type="button" id="btn-copy-page">
        <svg class="icon" aria-hidden="true"><use href="#i-copy"/></svg>
        <span>Copiar dados</span>
      </button>
      <button class="btn btn--ghost" type="button" id="btn-clear-page">
        <svg class="icon" aria-hidden="true"><use href="#i-trash"/></svg>
        <span>Limpar rascunho</span>
      </button>
      <p class="muted">LGPD: usamos seus dados apenas para atendimento via WhatsApp.</p>
    </section>

  </main>

  <!-- Ícones inline (mínimo necessário) -->
  <svg xmlns="http://www.w3.org/2000/svg" style="display:none">
    <symbol id="i-eye" viewBox="0 0 24 24"><path d="M2 12s3.5-6 10-6 10 6 10 6-3.5 6-10 6S2 12 2 12Z" stroke="currentColor" stroke-width="2" fill="none"/><circle cx="12" cy="12" r="3" fill="currentColor"/></symbol>
    <symbol id="i-locate" viewBox="0 0 24 24"><path d="M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18Z" stroke="currentColor" stroke-width="2" fill="none"/><circle cx="12" cy="12" r="3" fill="currentColor"/></symbol>
    <symbol id="i-copy" viewBox="0 0 24 24"><path d="M9 9h9v9H9z" stroke="currentColor" stroke-width="2" fill="none"/><path d="M6 6h9v9" stroke="currentColor" stroke-width="2" fill="none"/></symbol>
    <symbol id="i-trash" viewBox="0 0 24 24"><path d="M4 7h16M8 7V5h8v2m-1 0v12a2 2 0 0 1-2 2H9a2 2 0 0 1-2-2V7h10Z" stroke="currentColor" stroke-width="2" fill="none" stroke-linejoin="round"/></symbol>
  </svg>

  <script defer src="config.js"></script>
  <script defer src="main.js"></script>
  <script>
    // Utilidades rápidas da página
    document.addEventListener('DOMContentLoaded', ()=>{
      const copyBtn = document.getElementById('btn-copy-page');
      const clearBtn = document.getElementById('btn-clear-page');
      if(copyBtn){ copyBtn.addEventListener('click', ()=>{
        try{
          const s = localStorage.getItem((window.CONFIG && window.CONFIG.STORAGE && window.CONFIG.STORAGE.KEY) || 'fa_state_v1');
          navigator.clipboard.writeText(s || '').then(()=>{
            const t = document.createElement('div'); t.className='toast is-visible'; t.textContent='Dados copiados'; document.body.appendChild(t); setTimeout(()=>t.remove(), 1500);
          });
        }catch{}
      });}
      if(clearBtn){ clearBtn.addEventListener('click', ()=>{
        try{
          localStorage.removeItem((window.CONFIG && window.CONFIG.STORAGE && window.CONFIG.STORAGE.KEY) || 'fa_state_v1');
          location.reload();
        }catch{}
      });}
    });

    if('serviceWorker' in navigator){
      window.addEventListener('load', ()=>{ navigator.serviceWorker.register('sw.js').catch(()=>{}); });
    }
  </script>
</body>
</html>
